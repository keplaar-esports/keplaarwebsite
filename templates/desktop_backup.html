<!-- ============================================ -->
<!-- DESKTOP TEMPLATE - Complete with Full Form -->
<!-- ============================================ -->

<!-- Intro UI Container -->
<div id="ui-container">
  <!-- Video Background -->
  <div id="video-background">
    <video id="bg-video" src="assets/textures/background.mp4" autoplay muted loop playsinline preload="auto"></video>
  </div>

  <!-- Intro Panel -->
  <div id="ui-panel-1">
    <img src="assets/textures/logo.png" alt="Keplaar Esports Logo" class="logo">
    <h1>KEPLAAR ESPORTS</h1>
    <h2>Version 2.0 | Canada 2025</h2>
    <button id="enter-button">Enter Environment</button>
  </div>
</div>

<!-- Navigation UI -->
<div id="navigation-ui" style="display: none;">
  <button id="previous-button"></button>
  <button id="next-button"></button>
</div>

<!-- Website Header -->
<header id="website-header" style="display: none;">
  <div class="header-left">
    <a href="#" id="logo-link">
      <img src="assets/textures/logo.png" alt="Keplaar Esports Logo" class="header-logo">
      <span class="header-title">KEPLAAR ESPORTS</span>
    </a>
  </div>
  
  <nav class="header-right">
    <ul class="nav-menu">
      <li><a href="#" data-screen="events">Events</a></li>
      <li><a href="#" data-screen="about">About Us</a></li>
      <li><a href="#" data-screen="team">Our Team</a></li>
      <li><a href="#" data-screen="giveaways">Giveaways</a></li>
      <li><a href="#" data-screen="join">Join Us</a></li>
    </ul>
  </nav>
</header>

<!-- Social Media UI -->
<div id="social-media-ui" class="blurred-ui" style="display: none;">
  <div class="ui-content">
    <button class="close-button">&times;</button>
    <h2>Follow Us</h2>
    <p class="subtitle">Stay connected with Keplaar Esports</p>
    
    <div class="social-grid">
      <div class="social-item" data-platform="instagram">
        <div class="social-logo">
          <img src="assets/icons/instagram.png" alt="Instagram" class="social-icon">
        </div>
        <span class="social-name">Instagram</span>
        <span class="social-handle">@keplaaresports</span>
      </div>
      
      <div class="social-item" data-platform="twitter">
        <div class="social-logo">
          <img src="assets/icons/x.png" alt="Twitter/X" class="social-icon">
        </div>
        <span class="social-name">Twitter/X</span>
        <span class="social-handle">@keplaaresports</span>
      </div>
      
      <div class="social-item" data-platform="youtube">
        <div class="social-logo">
          <img src="assets/icons/youtube.png" alt="YouTube" class="social-icon">
        </div>
        <span class="social-name">YouTube</span>
        <span class="social-handle">Keplaar Esports</span>
      </div>
      
      <div class="social-item" data-platform="discord">
        <div class="social-logo">
          <img src="assets/icons/discord.png" alt="Discord" class="social-icon">
        </div>
        <span class="social-name">Discord</span>
        <span class="social-handle">Join our community</span>
      </div>
    </div>
    
    <button id="next-to-form">
      Continue to Contact Form
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>
</div>

<!-- ============================================ -->
<!-- NEW REDESIGNED CONTACT FORM - CLEAN & MODERN -->
<!-- ============================================ -->
<div id="contact-form-ui" class="blurred-ui" style="display: none;">
  <div class="ui-content form-container-new">
    <button class="close-button">&times;</button>
    
    <!-- Form Content -->
    <div class="new-form-content">
      <div class="new-form-header">
        <h2>Join Keplaar Esports</h2>
        <p class="new-form-subtitle">Apply to become part of our competitive gaming team</p>
      </div>
      
      <form id="player-application-form" class="new-application-form">
        <!-- Row 1: Name and Email -->
        <div class="form-row">
          <div class="form-field">
            <label for="player-name">
              <span class="label-icon">üë§</span>
              <span class="label-text">Full Name</span>
              <span class="required-mark">*</span>
            </label>
            <input type="text" id="player-name" name="name" required placeholder="Enter your full name">
          </div>

          <div class="form-field">
            <label for="player-email">
              <span class="label-icon">‚úâÔ∏è</span>
              <span class="label-text">Email Address</span>
              <span class="required-mark">*</span>
            </label>
            <input type="email" id="player-email" name="email" required placeholder="you@example.com">
          </div>
        </div>

        <!-- Row 2: Phone and Game -->
        <div class="form-row">
          <div class="form-field">
            <label for="player-phone">
              <span class="label-icon">üì±</span>
              <span class="label-text">Phone Number</span>
              <span class="required-mark">*</span>
            </label>
            <input type="tel" id="player-phone" name="phone" required placeholder="+1 (123) 456-7890">
          </div>

          <div class="form-field">
            <label for="player-game">
              <span class="label-icon">üéÆ</span>
              <span class="label-text">Primary Game</span>
              <span class="required-mark">*</span>
            </label>
            
            <div class="custom-select-wrapper">
              <div class="custom-select-display" id="game-select-display">
                <span class="select-placeholder">Select your primary game</span>
                <span class="select-arrow-icon">‚ñº</span>
              </div>
              
              <div class="custom-select-dropdown" id="game-select-dropdown">
                <div class="select-option" data-value="valorant" data-icon="üéØ">
                  <span class="opt-icon">üéØ</span>
                  <span class="opt-label">VALORANT</span>
                </div>
                <div class="select-option" data-value="fortnite" data-icon="üèπ">
                  <span class="opt-icon">üèπ</span>
                  <span class="opt-label">Fortnite</span>
                </div>
                <div class="select-option" data-value="dota2" data-icon="‚öîÔ∏è">
                  <span class="opt-icon">‚öîÔ∏è</span>
                  <span class="opt-label">Dota 2</span>
                </div>
                <div class="select-option" data-value="pubg" data-icon="üî´">
                  <span class="opt-icon">üî´</span>
                  <span class="opt-label">PUBG</span>
                </div>
              </div>
              
              <select id="player-game" name="game" required style="display: none;">
                <option value="" disabled selected></option>
                <option value="valorant">VALORANT</option>
                <option value="fortnite">Fortnite</option>
                <option value="dota2">Dota 2</option>
                <option value="pubg">PUBG</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Row 3: Rank and Game ID -->
        <div class="form-row">
          <div class="form-field">
            <label for="player-rank">
              <span class="label-icon">üèÜ</span>
              <span class="label-text">Current Rank</span>
              <span class="required-mark">*</span>
            </label>
            <input type="text" id="player-rank" name="rank" required placeholder="e.g., Radiant, Immortal, Diamond">
          </div>

          <div class="form-field">
            <label for="player-id">
              <span class="label-icon">üéØ</span>
              <span class="label-text">In-Game ID</span>
              <span class="required-mark">*</span>
            </label>
            <input type="text" id="player-id" name="game_id" required placeholder="Your username in the game">
          </div>
        </div>

        <!-- Row 4: File Upload (Full Width) -->
        <div class="form-field full-width">
          <label for="player-portfolio">
            <span class="label-icon">üìÅ</span>
            <span class="label-text">Portfolio/Highlights</span>
            <span class="optional-mark">(Optional)</span>
          </label>
          
          <div class="new-file-upload">
            <div class="file-drop-zone" id="new-file-drop">
              <div class="drop-zone-icon">üìÑ</div>
              <div class="drop-zone-text">
                <span class="drop-main">Drag & drop your PDF here</span>
                <span class="drop-sub">or click to browse ‚Ä¢ Max 5MB</span>
              </div>
              <input type="file" 
                     id="player-portfolio" 
                     name="portfolio" 
                     accept=".pdf,.PDF" 
                     class="file-input-hidden">
            </div>
            
            <div class="file-preview" id="new-file-preview" style="display: none;">
              <div class="preview-icon">üìÑ</div>
              <div class="preview-details">
                <span class="preview-name" id="new-file-name"></span>
                <span class="preview-size" id="new-file-size"></span>
              </div>
              <button type="button" class="preview-remove" id="new-file-remove">‚úï</button>
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="new-submit-btn">
          <span class="submit-text">Submit Application</span>
          <span class="submit-loading" style="display: none;">
            <span class="loading-spinner"></span>
            Processing...
          </span>
        </button>
        
        <p class="form-footer-note">* Required fields</p>
      </form>
    </div>
  </div>
</div>



<!-- INLINE SCRIPT - Form Handlers -->
<script>
console.log('üéØ Desktop template loaded - setting up NEW form handlers...');

setTimeout(() => {
    console.log('üéØ Setting up form handlers...');
    
    // ==========================================
    // NEW FORM: Custom Dropdown Handler
    // ==========================================
    const setupDropdown = () => {
        const selectDisplay = document.getElementById('game-select-display');
        const selectDropdown = document.getElementById('game-select-dropdown');
        const hiddenSelect = document.getElementById('player-game');
        const placeholder = selectDisplay?.querySelector('.select-placeholder');
        
        if (!selectDisplay || !selectDropdown) {
            console.log('‚ùå Dropdown elements not found yet, retrying...');
            setTimeout(setupDropdown, 500);
            return;
        }
        
        console.log('‚úÖ Dropdown elements found, setting up handlers');
        
        // Toggle dropdown
        selectDisplay.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            console.log('üñ±Ô∏è Dropdown clicked!');
            selectDisplay.classList.toggle('open');
            selectDropdown.classList.toggle('open');
        });
        
        // Option selection
        document.querySelectorAll('.select-option').forEach(option => {
            option.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                
                const value = option.dataset.value;
                const icon = option.dataset.icon;
                const label = option.querySelector('.opt-label').textContent;
                
                console.log('‚úÖ Selected:', value);
                
                // Update display
                placeholder.innerHTML = `${icon} ${label}`;
                placeholder.classList.add('selected');
                
                // Update hidden select
                hiddenSelect.value = value;
                
                // Visual feedback
                document.querySelectorAll('.select-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
                
                // Close dropdown
                selectDisplay.classList.remove('open');
                selectDropdown.classList.remove('open');
            });
        });
        
        // Close on outside click
        document.addEventListener('click', (e) => {
            if (!selectDisplay.contains(e.target) && !selectDropdown.contains(e.target)) {
                selectDisplay.classList.remove('open');
                selectDropdown.classList.remove('open');
            }
        });
    };
    
    setupDropdown();
                
                // Update hidden select
                hiddenSelect.value = value;
                
                // Visual feedback
                document.querySelectorAll('.select-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
                
                // Close dropdown
                selectDisplay.classList.remove('open');
                selectDropdown.classList.remove('open');
            });
        });
        
        // Close on outside click
        document.addEventListener('click', (e) => {
            if (!selectDisplay.contains(e.target) && !selectDropdown.contains(e.target)) {
                selectDisplay.classList.remove('open');
                selectDropdown.classList.remove('open');
            }
        });
    }
    
    // ==========================================
    // NEW FORM: File Upload Handler
    // ==========================================
    const fileInput = document.getElementById('player-portfolio');
    const dropZone = document.getElementById('new-file-drop');
    const filePreview = document.getElementById('new-file-preview');
    const fileName = document.getElementById('new-file-name');
    const fileSize = document.getElementById('new-file-size');
    const fileRemove = document.getElementById('new-file-remove');
    
    if (fileInput && dropZone) {
        // Click to upload
        dropZone.addEventListener('click', () => fileInput.click());
        
        // File selected
        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file && file.type === 'application/pdf') {
                displayFile(file);
            }
        });
        
        // Drag and drop
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('drag-active');
        });
        
        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('drag-active');
        });
        
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('drag-active');
            
            const file = e.dataTransfer.files[0];
            if (file && file.type === 'application/pdf') {
                fileInput.files = e.dataTransfer.files;
                displayFile(file);
            }
        });
        
        // Remove file
        if (fileRemove) {
            fileRemove.addEventListener('click', (e) => {
                e.stopPropagation();
                fileInput.value = '';
                dropZone.style.display = 'flex';
                filePreview.style.display = 'none';
            });
        }
        
        function displayFile(file) {
            fileName.textContent = file.name;
            fileSize.textContent = (file.size / 1024 / 1024).toFixed(2) + ' MB';
            dropZone.style.display = 'none';
            filePreview.style.display = 'flex';
        }
    }
    
    // ==========================================
    // NEW FORM: Submission Handler
    // ==========================================
    const form = document.getElementById('player-application-form');
    if (form) {
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const submitBtn = form.querySelector('.new-submit-btn');
            const submitText = form.querySelector('.submit-text');
            const submitLoading = form.querySelector('.submit-loading');
            
            // Show loading state
            submitText.style.display = 'none';
            submitLoading.style.display = 'flex';
            submitBtn.disabled = true;
            
            // Simulate submission
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Success
            alert('‚úÖ Application submitted successfully!');
            form.reset();
            
            // Reset UI
            if (filePreview) {
                filePreview.style.display = 'none';
                dropZone.style.display = 'flex';
            }
            if (placeholder) {
                placeholder.innerHTML = 'Select your primary game';
                placeholder.classList.remove('selected');
            }
            
            // Hide form
            document.getElementById('contact-form-ui').style.display = 'none';
            
            // Reset button
            submitText.style.display = 'inline';
            submitLoading.style.display = 'none';
            submitBtn.disabled = false;
        });
    }
    
    // ==========================================
    // Close Button Handlers
    // ==========================================
    const formCloseBtn = document.querySelector('#contact-form-ui .close-button');
    if (formCloseBtn) {
        formCloseBtn.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            if (window.app?.uiManager) {
                window.app.uiManager.hideAllUI();
            }
        });
    }
    
    const socialCloseBtn = document.querySelector('#social-media-ui .close-button');
    if (socialCloseBtn) {
        socialCloseBtn.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            if (window.app?.uiManager) {
                window.app.uiManager.hideAllUI();
            }
        });
    }
    
    // Click outside to close
    const socialUI = document.getElementById('social-media-ui');
    const formUI = document.getElementById('contact-form-ui');
    
    if (socialUI) {
        socialUI.addEventListener('click', (e) => {
            if (e.target === socialUI) {
                if (window.app?.uiManager) {
                    window.app.uiManager.hideAllUI();
                }
            }
        });
    }
    
    if (formUI) {
        formUI.addEventListener('click', (e) => {
            if (e.target === formUI) {
                if (window.app?.uiManager) {
                    window.app.uiManager.hideAllUI();
                }
            }
        });
    }
    
    console.log('‚úÖ NEW form handlers ready');
}, 500);
</script>
